{"version":3,"sources":["helpers/SignalingChannel.js","components/LinearProgressWithLabel/index.tsx","features/fileLoader/FileLoader.tsx","features/rtc/RTCPlayer.tsx","helpers/helpers.js","features/snackbar/SnackBar.tsx","features/auth/Auth.tsx","app/App.tsx","features/led/ledSlice.ts","app/rootReducer.ts","app/store.ts","index.tsx","features/snackbar/snackbarSlice.ts","features/fileLoader/fileLoaderSlice.ts","features/auth/authSlice.ts"],"names":["SignalingChannel","signaling","this","message","send","JSON","stringify","data","console","error","handler","onMessage","parse","addEventListener","unsubscribe","log","removeEventListener","LinearProgressWithLabel","props","value","Box","display","alignItems","width","mr","LinearProgress","variant","minWidth","Typography","color","Math","round","useStyles","makeStyles","progress","file","FileLoader","pcRef","dispatch","useDispatch","classes","useSelector","state","fileLoader","shallowEqual","maxProgress","progressValue","useState","selectedFile","setSelectedFile","useEffect","dropbox","window","dragenter","e","stopPropagation","preventDefault","dragover","drop","dataTransfer","files","MAX","resetFileSelect","type","id","style","onChange","target","List","className","ListItem","ListItemAvatar","Avatar","ListItemText","primary","name","secondary","Date","lastModified","toLocaleString","title","size","ListItemSecondaryAction","IconButton","edge","aria-label","onClick","Button","component","current","sendFileChannel","createDataChannel","binaryType","setMaxProgress","fileReader","FileReader","offset","event","isPaused","readSlice","byteOffset","slice","readAsArrayBuffer","result","readyState","warn","buffer","byteLength","setProgressValue","close","setSnackbarSuccess","bufferedAmount","label","bufferedAmountLowThreshold","debug","onopen","htmlFor","configuration","iceServers","url","urls","credential","username","theme","root","flexGrow","margin","spacing","padding","formControl","video","justifyContent","flexDirection","backgroundImage","process","backgroundSize","backgroundRepeat","minHeight","RTCPlayer","id_token","auth","remoteVideoRef","useRef","dcRef","inputValue","setInputValue","isDataChannelOpened","setDataChannelOpened","room","setRoom","queryParamKey","queryParamValue","roomQueryParam","URLSearchParams","toString","URL","ws","WebSocket","onOpenWS","getRemoteMedia","pc","RTCPeerConnection","ontrack","track","stream","streams","onunmute","srcObject","makingOffer","ignoreOffer","isSettingRemoteAnswerPending","onicecandidate","candidate","onnegotiationneeded","a","setLocalDescription","description","localDescription","oniceconnectionstatechange","iceConnectionState","restartIce","onmessage","readyForOffer","signalingState","setRemoteDescription","addIceCandidate","onSendChannelStateChange","channel","setSnackbarError","document","visibilityState","pictureInPictureElement","exitPictureInPicture","FormControl","InputLabel","Select","native","inputProps","Array","from","length","_","idx","map","noRoom","roomIdx","key","disabled","ref","autoPlay","playsInline","pictureInPictureEnabled","requestPictureInPicture","TextField","multiline","dataChannel","onclose","SnackBar","snackbarDelay","snackbar","open","snackbarMessage","onCloseSnackbar","closeSnackbar","Snackbar","autoHideDuration","onClose","Alert","severity","defaultProps","layout","marginLeft","marginRight","breakpoints","up","paper","marginTop","marginBottom","height","button","Auth","Paper","square","align","clientId","API_KEYS","GOOGLE_AUTH","buttonText","onSuccess","response","getProfile","profileObj","tokenObj","onFailure","cookiePolicy","isSignedIn","App","imageUrl","email","isAuthenticated","CssBaseline","elevation","Toolbar","alt","src","onLogoutSuccess","clearProfile","m","ledSlice","createSlice","initialState","pin1","pin2","pin3","reducers","setLed","action","payload","actions","rootReducer","combineReducers","led","store","configureStore","reducer","require","default","ReactDOM","render","getElementById","snackbarSlice","reset","fileLoaderSlice","authSlice"],"mappings":"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","file":"static/js/main.620f978a.chunk.js","sourcesContent":["class SignalingChannel {\n  constructor(signaling) {\n    this.signaling = signaling;\n  }\n\n  send(message) {\n    this.signaling.send(JSON.stringify({ data: message }));\n  }\n\n  set onmessage(handler) {\n    const onMessage = ({ data }) => {\n      handler(JSON.parse(data));\n    };\n\n    this.signaling.addEventListener('message', onMessage);\n\n    /* TODO refactor */\n    this.unsubscribe = () => {\n      console.log('unsubscribe from message');\n      this.signaling.removeEventListener('message', onMessage);\n    };\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  unsubscribe() {\n    console.error('Method unsubscribe is not implemented');\n  }\n}\n\nexport { SignalingChannel };\n","import React from 'react';\nimport { Box, LinearProgress, Typography } from '@material-ui/core';\n\ntype IProps = { value: number };\n\nconst LinearProgressWithLabel = (props: IProps) => {\n  const { value } = props;\n  return (\n    <Box display=\"flex\" alignItems=\"center\">\n      <Box width=\"100%\" mr={1}>\n        <LinearProgress variant=\"determinate\" {...props} />\n      </Box>\n      <Box minWidth={35}>\n        <Typography variant=\"body2\" color=\"textSecondary\">\n          {`${Math.round(value)}%`}\n        </Typography>\n      </Box>\n    </Box>\n  );\n};\n\nexport { LinearProgressWithLabel };\n","import { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport React, { ChangeEvent, useEffect, useState } from 'react';\nimport {\n  Avatar, Button,\n  IconButton,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemSecondaryAction,\n  ListItemText,\n} from '@material-ui/core';\nimport FolderIcon from '@material-ui/icons/AddToPhotos';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { LinearProgressWithLabel } from 'components/LinearProgressWithLabel';\nimport {\n  setMaxProgress,\n  setProgressValue,\n} from 'features/fileLoader/fileLoaderSlice';\nimport { RootState } from 'app/rootReducer';\nimport { setSnackbarSuccess } from 'features/snackbar/snackbarSlice';\n\nconst FILE_DATA_CHANNEL_BINARY_TYPE = 'arraybuffer';\nconst END_OF_FILE_MESSAGE = 'EOF';\nconst EMPTY_PROGRESS = 0;\nconst MIN = 0;\n\nconst normalize = (value: number, MAX: number) => ((value - MIN) * 100) / (MAX - MIN);\n\nconst useStyles = makeStyles(() => ({\n  progress: {\n    width: '100%',\n  },\n  file: {\n    display: 'flex',\n  },\n}));\n\ntype IProps = { pcRef: React.RefObject<RTCPeerConnection> };\n\nexport const FileLoader = ({ pcRef }: IProps) => {\n  const dispatch = useDispatch();\n  const classes = useStyles();\n\n  const {\n    maxProgress,\n    progressValue,\n  } = useSelector((state: RootState) => state.fileLoader, shallowEqual);\n\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n\n  useEffect(() => {\n    /* TODO - add drop it text on fullscreen */\n    /* TODO - allow adding file form clipboard */\n    const dropbox = window;\n\n    dropbox.addEventListener('dragenter', dragenter, false);\n    dropbox.addEventListener('dragover', dragover, false);\n    dropbox.addEventListener('drop', drop, false);\n\n    function dragenter(e: any) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n\n    function dragover(e: any) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n\n    function drop(e: any) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const { dataTransfer: { files: [file] } } = e;\n      setSelectedFile(file);\n    }\n\n    return () => {\n      dropbox.removeEventListener('dragenter', dragenter, false);\n      dropbox.removeEventListener('dragover', dragover, false);\n      dropbox.removeEventListener('drop', drop, false);\n    };\n  }, []);\n\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files as FileList;\n    setSelectedFile(files[0]);\n  };\n\n  const resetFileSelect = () => {\n    setSelectedFile(null);\n  };\n\n  const sendFile = () => {\n    if (!selectedFile || !pcRef.current) {\n      return;\n    }\n    /*\n                      Label may not be longer than 65,535 bytes.\n                      https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createDataChannel#parameters:~:text=channel.%20This%20string-,may%20not%20be%20longer%20than%2065%2C535%20bytes.\n                      Filename sizes may not exceed 255 bytes.\n                      https://www.ibm.com/support/knowledgecenter/SSEQVQ_8.1.10/client/c_cmd_filespecsyntax.html\n                  */\n    /* TODO improve selectedFile transferring https://github.com/webrtc/samples/blob/gh-pages/src/content/datachannel/filetransfer/js/main.js */\n    const sendFileChannel = pcRef.current.createDataChannel(selectedFile.name);\n    sendFileChannel.binaryType = FILE_DATA_CHANNEL_BINARY_TYPE;\n    dispatch(setMaxProgress(selectedFile.size));\n\n    /*\n                Firefox cannot send a message larger than 16 Kbytes to Chrome\n                https://viblast.com/blog/2015/2/5/webrtc-data-channel-message-size/#blog-body:~:text=Firefox%20cannot%20send%20a%20message%20larger%20than%2016%20Kbytes%20to%20Chrome\n                Messages smaller than 16kiB can be sent without concern,\n                as all major user agents handle them the same way.\n                Beyond that, things get more complicated.\n                https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Using_data_channels#understanding_message_size_limits\n\n                Tests have shown that targeting a high water mark of 1 MiB\n                and setting a low water mark of 256 KiB results in adequate throughput\n                https://stackoverflow.com/questions/56327783/webrtc-datachannel-for-high-bandwidth-application\n                https://github.com/w3c/webrtc-pc/issues/1979#issuecomment-486611845\n                */\n    // 2 ** 18 === 262144;\n    // 2 ** 20 === 1048576;\n    const CHUNK_SIZE = 262144;\n    const LOW_WATER_MARK = 262144;\n    const HIGH_WATER_MARK = 1048576;\n\n    const fileReader = new FileReader();\n    let offset = 0;\n\n    fileReader.addEventListener('error', (error) => {\n      console.error('Error reading selectedFile: ', error);\n    });\n\n    fileReader.addEventListener('abort', (event) => {\n      console.log('File reading aborted: ', event);\n    });\n\n    let isPaused = false;\n\n    const readSlice = (byteOffset: number) => {\n      console.log('readSlice', byteOffset);\n      const slice = selectedFile.slice(offset, byteOffset + CHUNK_SIZE);\n      fileReader.readAsArrayBuffer(slice);\n    };\n    // TODO UPDATE PAGE TITLE ON FILE LOAD\n    fileReader.addEventListener('load', (e: ProgressEvent<FileReader>) => {\n      console.log('FileReader.onload', e);\n      if (!e.target?.result || sendFileChannel.readyState !== 'open') {\n        console.warn('sendFileChannel.readyState is not open:', sendFileChannel.readyState);\n        return;\n      }\n\n      if (isPaused) {\n        console.warn('Unable to write, data channel is paused!');\n        return;\n      }\n\n      const buffer = e.target.result as ArrayBuffer;\n      sendFileChannel.send(buffer);\n\n      offset += buffer.byteLength;\n      dispatch(setProgressValue(offset));\n\n      if (offset >= selectedFile.size) {\n        sendFileChannel.send(END_OF_FILE_MESSAGE);\n        sendFileChannel.close();\n        setSelectedFile(null);\n        /* Reset progress */\n        dispatch(setMaxProgress(EMPTY_PROGRESS));\n        dispatch(setProgressValue(EMPTY_PROGRESS));\n        resetFileSelect();\n        dispatch(setSnackbarSuccess('Файл успешно отправлен'));\n        return;\n      }\n\n      if (isPaused || sendFileChannel.bufferedAmount < HIGH_WATER_MARK) {\n        readSlice(offset);\n      } else {\n        // Pause once high water mark has been reached\n        console.log(`Data channel ${sendFileChannel.label} paused @ ${sendFileChannel.bufferedAmount}`);\n        isPaused = true;\n      }\n      // Otherwise wait for bufferedamountlow event to trigger reading more data\n    });\n\n    sendFileChannel.bufferedAmountLowThreshold = LOW_WATER_MARK;\n    sendFileChannel.addEventListener('bufferedamountlow', () => {\n      if (isPaused) {\n        console.debug(`Data channel ${sendFileChannel.label} resumed @ ${sendFileChannel.bufferedAmount}`);\n        isPaused = false;\n        readSlice(offset);\n      }\n    });\n\n    sendFileChannel.onopen = () => {\n      const FIRST_BYTE_SLICE_NUMBER = 0;\n      readSlice(FIRST_BYTE_SLICE_NUMBER);\n    };\n  };\n\n  return (\n    <section>\n      <input type=\"file\" id=\"files\" style={{ display: 'none' }} onChange={onChange} />\n      {selectedFile && (\n        <List className={classes.file}>\n          <ListItem>\n            <ListItemAvatar>\n              <Avatar>\n                <FolderIcon />\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText\n              primary={selectedFile.name}\n              secondary={new Date(selectedFile.lastModified).toLocaleString()}\n              title={`${selectedFile.size} байт`}\n            />\n            <ListItemSecondaryAction>\n              <IconButton\n                edge=\"end\"\n                aria-label=\"delete\"\n                onClick={resetFileSelect}\n              >\n                <DeleteIcon />\n              </IconButton>\n            </ListItemSecondaryAction>\n          </ListItem>\n        </List>\n      )}\n      {progressValue > EMPTY_PROGRESS\n            && selectedFile\n        ? (\n          <div className={classes.progress}>\n            <LinearProgressWithLabel value={normalize(progressValue, maxProgress)} />\n          </div>\n        ) : <br />}\n      {selectedFile && (\n        <Button\n          component=\"button\"\n          color=\"primary\"\n          onClick={sendFile}\n          variant=\"contained\"\n          type=\"submit\"\n          size=\"small\"\n        >\n          Отправить\n        </Button>\n      )}\n      <Button\n        component=\"label\"\n        htmlFor=\"files\"\n        variant=\"contained\"\n        size=\"small\"\n        id=\"files\"\n      >\n        Загрузить прошивку\n      </Button>\n    </section>\n  );\n};\n","// @ts-nocheck\nimport React, { useEffect, useRef, useState } from 'react';\nimport { SignalingChannel } from 'helpers/SignalingChannel';\nimport { generateQueryParam } from 'helpers/helpers';\nimport {\n  Button,\n  FormControl,\n  InputLabel,\n  Select,\n  TextField,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setSnackbarError } from 'features/snackbar/snackbarSlice';\nimport { FileLoader } from 'features/fileLoader/FileLoader';\nimport { RootState } from 'app/rootReducer';\n\nconst QUERY_PARAM_ROOM_NAME = 'room';\n\nconst configuration = {\n  iceServers: [\n    { url: 'stun:stun.l.google.com:19302' },\n    { url: 'stun:stun1.l.google.com:19302' },\n    { url: 'stun:stun2.l.google.com:19302' },\n    { url: 'stun:stun3.l.google.com:19302' },\n    {\n      urls: 'turn:numb.viagenie.ca',\n      credential: '9u7prU:2}R{Sut~.)d[bP7,;Pgc\\'Pa',\n      username: 'fkrveacbukypqsqyaq@miucce.com',\n    },\n  ],\n};\n\nconst NO_ROOM = '';\nconst polite = true;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    '& > *': {\n      margin: theme.spacing(1),\n    },\n    padding: '2rem',\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: '10rem',\n  },\n  video: {\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'column',\n    backgroundImage: `url(${process.env.PUBLIC_URL}/chip.png)`,\n    backgroundSize: '5.5rem',\n    backgroundRepeat: 'space',\n    width: '100%',\n    minHeight: '30rem',\n  },\n}));\n\nconst MESSAGES_CHANNEL_NAME = 'sendDataChannel';\n\nconst RTCPlayer = () => {\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const id_token = useSelector((state: RootState) => state.auth.id_token);\n\n  const remoteVideoRef = useRef<HTMLVideoElement>(null);\n  const pcRef = useRef(null);\n  const dcRef = useRef(null);\n\n  const [inputValue, setInputValue] = useState('');\n  const [isDataChannelOpened, setDataChannelOpened] = useState(false);\n\n  const onInputChange = (e) => {\n    // TODO add snackbar feedback\n    if (!dcRef.current) {\n      const dataConstraint = null;\n      dcRef.current = pcRef.current.createDataChannel(MESSAGES_CHANNEL_NAME, dataConstraint);\n      const dataChannel = dcRef.current;\n      dataChannel.onopen = () => {\n        setDataChannelOpened(true);\n      };\n      dataChannel.onclose = () => {\n        setDataChannelOpened(false);\n      };\n    }\n\n    setInputValue(e.target.value);\n  };\n\n  const onSend = () => {\n    if (dcRef.current && isDataChannelOpened) {\n      dcRef.current.send(inputValue);\n      setInputValue('');\n    }\n  };\n\n  const [room, setRoom] = useState<string>(NO_ROOM);\n\n  useEffect(() => {\n    if (room === NO_ROOM) {\n      return;\n    }\n\n    const roomQueryParam = generateQueryParam(QUERY_PARAM_ROOM_NAME, room);\n    const baseURL = 'wss://wss-signaling.herokuapp.com';\n    const url = new URL(`${roomQueryParam && `?${roomQueryParam}`}`, baseURL).toString();\n    const ws = new WebSocket(url, ['id_token', id_token]);\n\n    let signaling;\n    const onCloseWS = (e) => {\n      console.log('CLOSE WS', e);\n    };\n    const onOpenWS = (e) => {\n      console.log('OPEN WS', e);\n      signaling = new SignalingChannel(ws);\n      signaling.send({ getRemoteMedia: true });\n\n      const pc = new RTCPeerConnection(configuration);\n      pcRef.current = pc;\n\n      pc.ontrack = ({ track, streams: [stream] }) => {\n        // once media for a remote track arrives, show it in the remote video element\n        // eslint-disable-next-line no-param-reassign\n        track.onunmute = () => {\n          // don't set srcObject again if it is already set.\n          if (remoteVideoRef.current.srcObject) {\n            return;\n          }\n          remoteVideoRef.current.srcObject = stream;\n        };\n      };\n\n      // - The perfect negotiation logic, separated from the rest of the application ---\n\n      // keep track of some negotiation state to prevent races and errors\n      let makingOffer = false;\n      let ignoreOffer = false;\n      let isSettingRemoteAnswerPending = false;\n\n      // send any ice candidates to the other peer\n      pc.onicecandidate = ({ candidate }) => {\n        signaling.send({ candidate });\n      };\n\n      // let the \"negotiationneeded\" event trigger offer generation\n      pc.onnegotiationneeded = async () => {\n        try {\n          makingOffer = true;\n          await pc.setLocalDescription();\n          signaling.send({ description: pc.localDescription });\n        } catch (err) {\n          console.error(err);\n        } finally {\n          makingOffer = false;\n        }\n      };\n\n      pc.oniceconnectionstatechange = () => {\n        if (pc.iceConnectionState === 'failed') {\n          pc.restartIce();\n        }\n      };\n\n      signaling.onmessage = async ({ data, data: { description, candidate } }) => {\n        console.log(data);\n\n        try {\n          if (description) {\n            // An offer may come in while we are busy processing SRD(answer).\n            // In this case, we will be in \"stable\" by the time the offer is processed\n            // so it is safe to chain it on our Operations Chain now.\n            const readyForOffer = !makingOffer\n                && (pc.signalingState === 'stable' || isSettingRemoteAnswerPending);\n            const offerCollision = description.type === 'offer' && !readyForOffer;\n\n            ignoreOffer = !polite && offerCollision;\n            if (ignoreOffer) {\n              return;\n            }\n            isSettingRemoteAnswerPending = description.type === 'answer';\n            await pc.setRemoteDescription(description); // SRD rolls back as needed\n            isSettingRemoteAnswerPending = false;\n            if (description.type === 'offer') {\n              await pc.setLocalDescription();\n              signaling.send({ description: pc.localDescription });\n            }\n          } else if (candidate) {\n            try {\n              await pc.addIceCandidate(candidate);\n            } catch (err) {\n              if (!ignoreOffer) {\n                throw err;\n              } // Suppress ignored offer's candidates\n            }\n          }\n        } catch (err) {\n          console.error(err);\n        }\n      };\n\n      const onSendChannelStateChange = ({ target: { readyState } }) => {\n        console.log('Send channel state is: %s', readyState);\n      };\n\n      /* TODO remove as far as we do not accept any messages */\n      pc.addEventListener('datachannel', ({ channel }) => {\n        channel.addEventListener('message', (event) => {\n          console.log('Received Message: %s', event.data);\n        });\n        channel.addEventListener('open', onSendChannelStateChange);\n        channel.addEventListener('close', onSendChannelStateChange);\n      });\n    };\n    const onErrorWS = (e) => {\n      console.error('ERROR WS', e);\n      dispatch(setSnackbarError(`Не удалось присоединиться к стенду ${room}`));\n    };\n\n    ws.addEventListener('open', onOpenWS);\n    ws.addEventListener('close', onCloseWS);\n    ws.addEventListener('error', onErrorWS);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      ws.close(1000, 'change room');\n      if (pcRef.current) {\n        pcRef.current.close();\n      }\n      ws.removeEventListener('open', onOpenWS);\n      if (signaling) {\n        signaling.unsubscribe();\n      }\n      remoteVideoRef.current.srcObject = null;\n    };\n  }, [room]);\n\n  useEffect(() => {\n    const handler = () => {\n      if (document.visibilityState === 'visible' && document.pictureInPictureElement) {\n        document.exitPictureInPicture();\n      }\n    };\n\n    document.addEventListener('visibilitychange', handler);\n    return () => {\n      document.removeEventListener('visibilitychange', handler);\n    };\n  }, []);\n\n  const onChangeRoom = (e) => {\n    setRoom(e.target.value);\n  };\n\n  const togglePictureInPicture = (e) => {\n    if (!remoteVideoRef.current?.srcObject) {\n      return;\n    }\n\n    if (document.pictureInPictureElement) {\n      document.exitPictureInPicture();\n    } else if (document.pictureInPictureEnabled) {\n      e.target.requestPictureInPicture();\n    }\n  };\n\n  return (\n    <div className={classes.root}>\n      <FormControl variant=\"standard\" className={classes.formControl}>\n        <InputLabel htmlFor=\"outlined-room-native-simple\">Стенд</InputLabel>\n        <Select\n          native\n          value={room}\n          onChange={onChangeRoom}\n          label=\"Стенда\"\n          inputProps={{\n            name: 'Стенд',\n            id: 'outlined-room-native-simple',\n          }}\n        >\n          {Array.from(({ length: 5 }), (_, idx) => idx)\n            .map((idx) => {\n              const noRoom = idx === 0;\n              const roomIdx = noRoom ? NO_ROOM : idx.toString();\n\n              return (\n                <option\n                  key={roomIdx}\n                  value={roomIdx}\n                  disabled={noRoom}\n                  aria-label={noRoom ? 'None' : roomIdx}\n                >\n                  {roomIdx}\n                </option>\n              );\n            })}\n        </Select>\n      </FormControl>\n      <section className={classes.video}>\n        {/* eslint-disable-next-line jsx-a11y/media-has-caption */}\n        <video\n          ref={remoteVideoRef}\n          autoPlay\n          playsInline\n          onClick={togglePictureInPicture}\n        />\n      </section>\n      <FileLoader pcRef={pcRef} />\n      <section>\n        <TextField\n          multiline\n          value={inputValue}\n          onChange={onInputChange}\n        />\n        <br />\n        <br />\n        <Button\n          component=\"button\"\n          color=\"primary\"\n          onClick={onSend}\n          variant=\"contained\"\n          type=\"submit\"\n          size=\"small\"\n          disabled={!isDataChannelOpened}\n        >\n          Отправить команду\n        </Button>\n      </section>\n    </div>\n  );\n};\n\nexport default RTCPlayer;\n","export const generateQueryParam = (\n  queryParamKey, queryParamValue,\n) => new URLSearchParams({ [queryParamKey]: queryParamValue }).toString();\n","import React from 'react';\nimport { Alert } from '@material-ui/lab';\nimport { Snackbar } from '@material-ui/core';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { closeSnackbar } from 'features/snackbar/snackbarSlice';\nimport { RootState } from 'app/rootReducer';\n\nconst SNACKBAR_DELAY = 6000;\n\ntype IProps = {\n    snackbarDelay?: number\n};\n\nexport const SnackBar = ({ snackbarDelay }: IProps) => {\n  const dispatch = useDispatch();\n\n  const {\n    open,\n    snackbarMessage,\n    type,\n  } = useSelector((state: RootState) => state.snackbar, shallowEqual);\n\n  const onCloseSnackbar = () => {\n    dispatch(closeSnackbar());\n  };\n\n  return (\n    <Snackbar\n      open={open}\n      autoHideDuration={snackbarDelay}\n      onClose={onCloseSnackbar}\n      onClick={onCloseSnackbar}\n    >\n      <Alert severity={type}>\n        {snackbarMessage}\n      </Alert>\n    </Snackbar>\n  );\n};\n\nSnackBar.defaultProps = {\n  snackbarDelay: SNACKBAR_DELAY,\n};\n","import React from 'react';\nimport { GoogleLogin } from 'react-google-login';\nimport { getProfile } from 'features/auth/authSlice';\nimport { useDispatch } from 'react-redux';\nimport API_KEYS from 'API_KEYS.json';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Paper } from '@material-ui/core';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles((theme) => ({\n  layout: {\n    width: 'auto',\n    marginLeft: theme.spacing(2),\n    marginRight: theme.spacing(2),\n    [theme.breakpoints.up(350 + theme.spacing(2) * 2)]: {\n      width: 350,\n      marginLeft: 'auto',\n      marginRight: 'auto',\n    },\n  },\n  paper: {\n    marginTop: theme.spacing(3),\n    marginBottom: theme.spacing(3),\n    padding: theme.spacing(2),\n    height: 190,\n    [theme.breakpoints.up(350 + theme.spacing(3) * 2)]: {\n      marginTop: theme.spacing(6),\n      marginBottom: theme.spacing(6),\n      padding: theme.spacing(3),\n    },\n  },\n  button: {\n    marginTop: theme.spacing(3),\n    display: 'flex',\n    justifyContent: 'center',\n  },\n}));\n\nconst Auth = () => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n\n  const onSuccess = (response: any) => {\n    dispatch(getProfile({ ...response.profileObj, id_token: response.tokenObj.id_token }));\n  };\n\n  const onFailure = (e: any) => {\n    console.error(e);\n  };\n\n  return (\n    <main className={classes.layout}>\n      <Paper className={classes.paper} variant=\"outlined\" square>\n        <Typography component=\"h5\" variant=\"h5\" align=\"center\">\n          Авторизация\n        </Typography>\n        <div className={classes.button}>\n          <GoogleLogin\n            clientId={API_KEYS.GOOGLE_AUTH}\n            buttonText=\"Войти\"\n            onSuccess={onSuccess}\n            onFailure={onFailure}\n            cookiePolicy=\"single_host_origin\"\n            isSignedIn\n          />\n        </div>\n      </Paper>\n    </main>\n  );\n};\n\nexport default Auth;\n","import React from 'react';\nimport RTCPlayer from 'features/rtc/RTCPlayer';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport {\n  Box,\n  Paper,\n  Avatar,\n  ListItemText,\n  Toolbar,\n} from '@material-ui/core';\nimport { GoogleLogout } from 'react-google-login';\nimport { SnackBar } from 'features/snackbar/SnackBar';\n\nimport API_KEYS from 'API_KEYS.json';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n// eslint-disable-next-line @typescript-eslint/no-unused-vars,no-unused-vars\nimport adapter from 'webrtc-adapter';\nimport { clearProfile } from '../features/auth/authSlice';\nimport Auth from '../features/auth/Auth';\n\nconst App = () => {\n  const dispatch = useDispatch();\n  const {\n    imageUrl,\n    email,\n    name,\n  } = useSelector((state: any) => state.auth, shallowEqual);\n\n  const isAuthenticated = !!name;\n\n  const onLogoutSuccess = () => {\n    dispatch(clearProfile());\n  };\n\n  return (\n    <>\n      <CssBaseline />\n      <SnackBar />\n      {isAuthenticated ? (\n        <>\n          <Paper elevation={1} variant=\"outlined\" square>\n            <Toolbar>\n              <Box mr={1}>\n                <Avatar alt={name} src={imageUrl} />\n              </Box>\n              <ListItemText\n                primary={name}\n                secondary={email}\n              />\n              <GoogleLogout\n                clientId={API_KEYS.GOOGLE_AUTH}\n                buttonText=\"Выйти\"\n                onLogoutSuccess={onLogoutSuccess}\n              />\n            </Toolbar>\n          </Paper>\n          <Box m={2}>\n            <Paper elevation={3} variant=\"outlined\">\n              <RTCPlayer />\n              {/* FIXME <LedIndicator /> */}\n            </Paper>\n          </Box>\n        </>\n      )\n        : <Auth />}\n    </>\n  );\n};\n\nexport default App;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\ntype Led = {\n  pin1: boolean,\n  pin2: boolean,\n  pin3: boolean,\n}\n\nconst initialState = {\n  pin1: false,\n  pin2: false,\n  pin3: false,\n};\n\nconst ledSlice = createSlice({\n  name: 'led',\n  initialState,\n  reducers: {\n    setLed(state, action: PayloadAction<Led>) {\n      return action.payload;\n    },\n  },\n});\n\nexport const { setLed } = ledSlice.actions;\n\nexport default ledSlice.reducer;\n","import auth from 'features/auth/authSlice';\nimport fileLoader from 'features/fileLoader/fileLoaderSlice';\nimport led from 'features/led/ledSlice';\nimport snackbar from 'features/snackbar/snackbarSlice';\nimport { combineReducers } from '@reduxjs/toolkit';\n\nconst rootReducer = combineReducers({\n  auth,\n  fileLoader,\n  led,\n  snackbar,\n});\n\nexport type RootState = ReturnType<typeof rootReducer>\n\nexport default rootReducer;\n","import { Action, configureStore } from '@reduxjs/toolkit';\nimport { ThunkAction } from 'redux-thunk';\n\nimport rootReducer, { RootState } from 'app/rootReducer';\n\nconst store = configureStore({\n  reducer: rootReducer,\n});\n\n// @ts-ignore\nif (process.env.NODE_ENV === 'development' && module.hot) {\n  // @ts-ignore\n  module.hot.accept('./rootReducer', () => {\n    // eslint-disable-next-line global-require\n    const newRootReducer = require('./rootReducer').default;\n    store.replaceReducer(newRootReducer);\n  });\n}\n\nexport type AppDispatch = typeof store.dispatch\nexport type AppThunk = ThunkAction<void, RootState, null, Action<string>>\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport store from './app/store';\nimport './index.css';\n\nfunction render() {\n  // eslint-disable-next-line global-require\n  const App = require('./app/App').default;\n  ReactDOM.render(\n    <Provider store={store}>\n      <App />\n    </Provider>,\n    document.getElementById('root'),\n  );\n}\n\nrender();\n\n// @ts-ignore\nif (process.env.NODE_ENV === 'development' && module.hot) {\n  // @ts-ignore\n  module.hot.accept('./app/App', render);\n}\n","/* eslint-disable no-param-reassign */\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { Color } from '@material-ui/lab/Alert/Alert';\n\nconst initialState = {\n  snackbarMessage: '',\n  type: 'info' as Color,\n  open: false,\n};\n\nconst snackbarSlice = createSlice({\n  name: 'snackbar',\n  initialState,\n  reducers: {\n    reset() {\n      return initialState;\n    },\n    setSnackbarSuccess(state, action: PayloadAction<string>) {\n      state.snackbarMessage = action.payload;\n      state.type = 'success';\n      state.open = true;\n      return state;\n    },\n    setSnackbarError(state, action: PayloadAction<string>) {\n      state.snackbarMessage = action.payload;\n      state.type = 'error';\n      state.open = true;\n      return state;\n    },\n    closeSnackbar(state) {\n      // State of snackbar is not reset on snackbar close in order to perform close animation\n      state.open = false;\n      return state;\n    },\n  },\n});\n\nexport const {\n  reset,\n  setSnackbarSuccess,\n  setSnackbarError,\n  closeSnackbar,\n} = snackbarSlice.actions;\n\nexport default snackbarSlice.reducer;\n","/* eslint-disable no-param-reassign */\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nconst EMPTY_PROGRESS = 0;\n\nconst initialState = {\n  maxProgress: EMPTY_PROGRESS,\n  progressValue: EMPTY_PROGRESS,\n};\n\nconst fileLoaderSlice = createSlice({\n  name: 'fileLoader',\n  initialState,\n  reducers: {\n    reset() {\n      return initialState;\n    },\n    setMaxProgress(state, action: PayloadAction<number>) {\n      state.maxProgress = action.payload;\n      return state;\n    },\n    setProgressValue(state, action: PayloadAction<number>) {\n      state.progressValue = action.payload;\n      return state;\n    },\n  },\n});\n\nexport const {\n  reset,\n  setMaxProgress,\n  setProgressValue,\n} = fileLoaderSlice.actions;\n\nexport default fileLoaderSlice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\ntype AuthState = {\n    googleId: string,\n    imageUrl: string,\n    email: string,\n    name: string,\n    givenName: string,\n    familyName: string,\n    id_token: string,\n}\n\nconst initialState = {};\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    getProfile(state, action: PayloadAction<AuthState>) {\n      return action.payload;\n    },\n    clearProfile() {\n      return initialState;\n    },\n  },\n});\n\nexport const { getProfile, clearProfile } = authSlice.actions;\n\nexport default authSlice.reducer;\n"],"sourceRoot":""}