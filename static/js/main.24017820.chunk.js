(this["webpackJsonpremote-work-equipment-stand"]=this["webpackJsonpremote-work-equipment-stand"]||[]).push([[0],{104:function(e,n,t){},105:function(e,n,t){},106:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(40),o=t(28),l=t(14),i=t(127),u=t(128),s=t(136),d=t(129),f=t(137),m=t(138),p=t(130),b=t(41),v=t(125),g=Object(v.a)((function(){return{root:{flexGrow:1}}})),E=function(){var e=Object(l.c)(),n=Object(l.d)((function(e){return e.auth}),l.b),t=n.imageUrl,a=n.email,v=n.name,E=g(),O=!!v;return r.a.createElement(i.a,null,r.a.createElement("div",{className:E.root},r.a.createElement(u.a,null,r.a.createElement(s.a,null,v&&r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(f.a,{alt:v,src:t}))),r.a.createElement(m.a,{primary:v,secondary:a}),r.a.createElement(p.a,null,O?r.a.createElement(c.GoogleLogout,{clientId:b.GOOGLE_AUTH,buttonText:"\u0412\u044b\u0439\u0442\u0438",onLogoutSuccess:function(){e(Object(o.a)())}}):r.a.createElement(c.GoogleLogin,{clientId:b.GOOGLE_AUTH,buttonText:"\u0412\u043e\u0439\u0442\u0438",onSuccess:function(n){e(Object(o.c)(n.profileObj))},onFailure:function(e){console.error(e)},cookiePolicy:"single_host_origin",isSignedIn:!0}))))))},O=t(19),j=t.n(O),h=t(32),y=t(18),k=t(131),S=t(132),w=t(134),L=t(135),x=t(63),P=t.n(x),_=t(64),C=t.n(_),D=t(62),F=t.n(D),N=Object(v.a)((function(e){return{root:{flexGrow:1,maxWidth:"20rem","& > *":{margin:e.spacing(1)}}}})),R=function(){var e=N(),n=Object(a.useState)(),t=Object(y.a)(n,2),c=t[0],o=t[1],l=Object(a.useState)(!1),i=Object(y.a)(l,2),b=i[0],v=i[1];Object(a.useEffect)((function(){var e=window;function n(e){e.stopPropagation(),e.preventDefault()}function t(e){e.stopPropagation(),e.preventDefault()}function a(e){e.stopPropagation(),e.preventDefault();var n=e.dataTransfer.files;o(n[0])}return e.addEventListener("dragenter",n,!1),e.addEventListener("dragover",t,!1),e.addEventListener("drop",a,!1),function(){e.removeEventListener("dragenter",n,!1),e.removeEventListener("dragover",t,!1),e.removeEventListener("drop",a,!1)}}),[]);var g=function(){o(null),O.current&&(O.current.value=O.current.defaultValue)},E=function(){var e=Object(h.a)(j.a.mark((function e(n){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),(t=new FormData).append("file",c),e.next=5,F()({method:"post",url:"http://localhost:8080/upload-image",data:t,headers:{"Content-Type":"multipart/form-data"}});case 5:v(!0),g();case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),O=Object(a.useRef)(null);return r.a.createElement("div",{className:e.root},r.a.createElement("form",{method:"post",encType:"multipart/form-data"},r.a.createElement("input",{ref:O,type:"file",id:"files",accept:".jpg",style:{display:"none"},onChange:function(e){o(e.target.files[0])}}),c&&r.a.createElement(u.a,null,r.a.createElement(s.a,null,r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(P.a,null))),r.a.createElement(m.a,{primary:c.name,secondary:c.lastModifiedDate.toLocaleString(),title:"".concat(c.size," \u0431\u0430\u0439\u0442")}),r.a.createElement(p.a,null,r.a.createElement(k.a,{edge:"end","aria-label":"delete",onClick:g},r.a.createElement(C.a,null))))),r.a.createElement(S.a,{component:"label",htmlFor:"files",variant:"contained",size:"small"},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"),c&&r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{component:"button",color:"primary",onClick:E,variant:"contained",type:"submit",size:"small"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")),r.a.createElement(w.a,{open:b,autoHideDuration:6e3,onClose:function(){return v(!1)}},r.a.createElement(L.a,{severity:"success"},"\u0424\u0430\u0439\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d"))))},G=t(65),T=t(66),q=function(){function e(n){Object(G.a)(this,e),this.signaling=n}return Object(T.a)(e,[{key:"send",value:function(e){this.signaling.send(JSON.stringify({data:e}))}},{key:"onmessage",set:function(e){this.signaling.onmessage=function(n){var t=n.data;e(JSON.parse(t))}}}]),e}(),I=t(67),W=(t(104),{iceServers:[{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{urls:"turn:numb.viagenie.ca",credential:"9u7prU:2}R{Sut~.)d[bP7,;Pgc'Pa",username:"fkrveacbukypqsqyaq@miucce.com"}]}),J=function(){var e=Object(a.useRef)(null),n=Object(a.useRef)(null),t=Object(a.useRef)(null),c=Object(a.useState)(0),o=Object(y.a)(c,2),l=o[0],i=o[1],u=Object(a.useState)(0),s=Object(y.a)(u,2),d=s[0],f=s[1];Object(a.useEffect)((function(){var n,a,r=(n="room",a=1,new URLSearchParams(Object(I.a)({},n,a)).toString()),c=new WebSocket("wss://wss-signaling.herokuapp.com/".concat(r&&"?".concat(r))),o=new q(c),l=new RTCPeerConnection(W);t.current=l,l.ontrack=function(n){var t=n.track,a=Object(y.a)(n.streams,1)[0];t.onunmute=function(){e.current.srcObject||(e.current.srcObject=a)}};var i=!1,u=!1,s=!1;l.onicecandidate=function(e){var n=e.candidate;o.send({candidate:n})},l.onnegotiationneeded=Object(h.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=!0,e.next=4,l.setLocalDescription();case 4:o.send({description:l.localDescription}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:return e.prev=10,i=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])}))),l.oniceconnectionstatechange=function(){"failed"===l.iceConnectionState&&l.restartIce()},o.onmessage=function(){var e=Object(h.a)(j.a.mark((function e(n){var t,a,r,c,d;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.data,a=n.data,r=a.description,c=a.candidate,console.log(t),e.prev=2,!r){e.next=19;break}if(d=!i&&("stable"===l.signalingState||s),"offer"===r.type&&!d,!(u=!1)){e.next=9;break}return e.abrupt("return");case 9:return s="answer"===r.type,e.next=12,l.setRemoteDescription(r);case 12:if(s=!1,"offer"!==r.type){e.next=17;break}return e.next=16,l.setLocalDescription();case 16:o.send({description:l.localDescription});case 17:e.next=29;break;case 19:if(!c){e.next=29;break}return e.prev=20,e.next=23,l.addIceCandidate(c);case 23:e.next=29;break;case 25:if(e.prev=25,e.t0=e.catch(20),u){e.next=29;break}throw e.t0;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(2),console.error(e.t1);case 34:case"end":return e.stop()}}),e,null,[[2,31],[20,25]])})));return function(n){return e.apply(this,arguments)}}();var d=function(e){var n=e.target.readyState;console.log("Send channel state is: %s",n)};l.addEventListener("datachannel",(function(e){var n=e.channel;n.addEventListener("message",(function(e){console.log("Received Message: %s",e.data)})),n.addEventListener("open",d),n.addEventListener("close",d)}))}),[]);return r.a.createElement("div",{className:"player__container"},r.a.createElement("hr",null),r.a.createElement("section",null,r.a.createElement("h3",null,"Data channel file sender"),r.a.createElement("input",{type:"file",ref:n,style:{display:"none"},onChange:function(e){var n=Object(y.a)(e.target.files,1)[0],a=n.name,r=n.size;i(r);var c=t.current.createDataChannel(a,null);c.binaryType="arraybuffer";var o=Math.pow(2,14),l=new FileReader,u=0;l.addEventListener("error",(function(e){console.error("Error reading file: ",e)})),l.addEventListener("abort",(function(e){console.log("File reading aborted: ",e)}));var s=function(e){console.log("readSlice",e);var t=n.slice(u,e+o);l.readAsArrayBuffer(t)};l.addEventListener("load",(function(e){console.log("FileReader.onload",e),c.send(e.target.result),u<n.size?s(u):c.send("EOF")})),l.addEventListener("progress",(function(e){u+=e.loaded,f(u)})),l.addEventListener("loadend",(function(e){console.log("loadend",e)})),c.onopen=function(){s(0)}}}),r.a.createElement("br",null),r.a.createElement("button",{type:"button",onClick:function(){n.current.click()}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0444\u0430\u0439\u043b"),d>0&&r.a.createElement("progress",{max:l,value:d}),r.a.createElement("hr",null)),r.a.createElement("h4",null,"\u0423\u0434\u0430\u043b\u0451\u043d\u043d\u043e\u0435 \u0432\u0438\u0434\u0435\u043e"),r.a.createElement("video",{ref:e,autoPlay:!0,playsInline:!0}))},U=t(68),z=t.n(U),A=(t(105),t(33)),H=function(){var e=Object(l.d)((function(e){return e.led}),l.b),n=Object(l.c)(),t=Object(a.useRef)(null);Object(a.useEffect)((function(){return t.current=new WebSocket("ws://localhost:8080/ws"),t.current.onopen=function(){console.log("WS connected"),t.current.send("Ping from client")},t.current.onclose=function(e){console.log("WS closed connection",e)},t.current.onerror=function(e){console.log("WS error",e)},t.current.onmessage=function(e){console.log("WS message",e.data),n(Object(A.b)(JSON.parse(e.data)))},function(){t.current.close()}}),[]);var c=function(){t.current.send("ON")},o=function(){t.current.send("OFF")};return r.a.createElement("div",{className:"board"},r.a.createElement("div",{className:"led__container"},Object.entries(e).map((function(e,n){var t=Object(y.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",{key:a,className:"led__item"},r.a.createElement("span",null,n+1),r.a.createElement("span",{className:z()("led",{led__off:!c,led__on:c})}))}))),r.a.createElement(S.a,{variant:"contained",onClick:c,color:"primary"},"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c"),r.a.createElement(S.a,{variant:"contained",onClick:o,color:"secondary"},"\u0412\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c"))};n.default=function(){var e=!!Object(l.d)((function(e){return e.auth.name}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(E,null),e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(J,null),r.a.createElement(R,null),r.a.createElement(H,null)))}},107:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(8),o=t.n(c),l=t(14),i=t(20),u=t(15),s=t(28),d=t(33),f=Object(u.c)({auth:s.b,led:d.a});var m=Object(i.a)({reducer:f});t(84);!function(){var e=t(106).default;o.a.render(r.a.createElement(l.a,{store:m},r.a.createElement(e,null)),document.getElementById("root"))}()},28:function(e,n,t){"use strict";t.d(n,"c",(function(){return l})),t.d(n,"a",(function(){return i}));var a=t(20),r={},c=Object(a.b)({name:"auth",initialState:r,reducers:{getProfile:function(e,n){return n.payload},clearProfile:function(){return r}}}),o=c.actions,l=o.getProfile,i=o.clearProfile;n.b=c.reducer},33:function(e,n,t){"use strict";t.d(n,"b",(function(){return c}));var a=t(20),r=Object(a.b)({name:"led",initialState:{pin1:!1,pin2:!1,pin3:!1},reducers:{setLed:function(e,n){return n.payload}}}),c=r.actions.setLed;n.a=r.reducer},41:function(e){e.exports=JSON.parse('{"GOOGLE_AUTH":"930914015370-b31p63biqg1j0pbfr96qei9ujp1ttded.apps.googleusercontent.com"}')},74:function(e,n,t){e.exports=t(107)},84:function(e,n,t){}},[[74,1,2]]]);
//# sourceMappingURL=main.24017820.chunk.js.map